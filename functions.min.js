var totalPos=1,selectedCharacter=0,zellen=new Array;zellen[0]=" ";var bit=new Array;function loesch(){(zellen=new Array)[0]=" ",totalPos=1,ausgabe(1),writeToTextAusgabe()}function openPopup(){document.getElementById("popup").classList.toggle("show")}function ausgabe(e){screenpos=e;var t=zellen[e-1],c=[0,0,0,0,0,0];"1"==bit[braillecode[t].substr(0,1)].charAt(0)?c[0]=1:c[0]=0,"1"==bit[braillecode[t].substr(0,1)].charAt(1)?c[1]=1:c[1]=0,"1"==bit[braillecode[t].substr(0,1)].charAt(2)?c[2]=1:c[2]=0,"1"==bit[braillecode[t].substr(1,1)].charAt(0)?c[3]=1:c[3]=0,"1"==bit[braillecode[t].substr(1,1)].charAt(1)?c[4]=1:c[4]=0,"1"==bit[braillecode[t].substr(1,1)].charAt(2)?c[5]=1:c[5]=0;for(var n=0;n<6;n++){screenpos;c[n]?document.getElementById(`checkbox${n+1}small`).checked=!0:document.getElementById(`checkbox${n+1}small`).checked=!1}writeToTextAusgabe()}function klick(e,t){var c,n=e;9998==e?(n=totalPos-1,selectedCharacter>0&&(n=selectedCharacter),c=zellen[n]):c=zellen[n];var a,o,r=[0,0,0,0,0,0];"1"==bit[braillecode[c].substr(0,1)].charAt(0)?r[0]=1:r[0]=0,"1"==bit[braillecode[c].substr(0,1)].charAt(1)?r[1]=1:r[1]=0,"1"==bit[braillecode[c].substr(0,1)].charAt(2)?r[2]=1:r[2]=0,"1"==bit[braillecode[c].substr(1,1)].charAt(0)?r[3]=1:r[3]=0,"1"==bit[braillecode[c].substr(1,1)].charAt(1)?r[4]=1:r[4]=0,"1"==bit[braillecode[c].substr(1,1)].charAt(2)?r[5]=1:r[5]=0,r[t-1]?r[t-1]=0:r[t-1]=1,a=bit[r[0].toString()+r[1].toString()+r[2].toString()],o=bit[r[3].toString()+r[4].toString()+r[5].toString()],zellen[n]=brailleback(a+o),writeToTextAusgabe()}function grosseAuslesen(){selectedCharacter=totalPos;var e=[0,0,0,0,0,0];document.getElementById("checkbox1").checked?e[0]=1:e[0]=0,document.getElementById("checkbox2").checked?e[1]=1:e[1]=0,document.getElementById("checkbox3").checked?e[2]=1:e[2]=0,document.getElementById("checkbox4").checked?e[3]=1:e[3]=0,document.getElementById("checkbox5").checked?e[4]=1:e[4]=0,document.getElementById("checkbox6").checked?e[5]=1:e[5]=0,document.getElementById("checkbox1").checked=!1,document.getElementById("checkbox2").checked=!1,document.getElementById("checkbox3").checked=!1,document.getElementById("checkbox4").checked=!1,document.getElementById("checkbox5").checked=!1,document.getElementById("checkbox6").checked=!1,eingabe(bit[e[0].toString()+e[1].toString()+e[2].toString()]+bit[e[3].toString()+e[4].toString()+e[5].toString()]),scrollTextToEnd()}function aend(e){if(!(e<1)){var t=zellen[e];"a"==t?t="1":"1"==t?t="a":"b"==t?t="2":"2"==t?t="b":"en"==t?t="c":"c"==t?t="3":"3"==t?t="en":"d"==t?t="4":"4"==t?t="d":"e"==t?t="5":"5"==t?t="e":"f"==t?t="6":"6"==t?t="falls":"falls"==t?t="f":"g"==t?t="7":"7"==t?t="g":"h"==t?t="8":"8"==t?t="heit":"heit"==t?t="h":"i"==t?t="9":"9"==t?t="i":"j"==t?t="0":"0"==t?t="ion":"ion"==t?t="j":","==t?t="1.":"1."==t?t=",":"be"==t?t="2.":"2."==t?t=";":";"==t?t="be":"al"==t?t="3.":"3."==t?t=":":":"==t?t="al":"un"==t?t="4.":"4."==t?t="un":"or"==t?t="5.":"5."==t?t="?":"?"==t?t="or":"an"==t?t="6.":"6."==t?t="!":"!"==t?t="an":"eh"==t?t="7.":"7."==t?t="(=)":"(=)"==t?t="(":"("==t?t="=":"="==t?t=")":")"==t?t="eh":"te"==t?t="8.":"8."==t?t="»":"»"==t?t="te":"in"==t?t="9.":"9."==t?t="in":"ar"==t?t="0.":"0."==t?t="«":"«"==t?t="ar":"c"==t?t="en":"en"==t?t="c":"q"==t?t="ll":"ll"==t?t="q":"x"==t?t="mm":"mm"==t?t="nis":"nis"==t?t="x":"y"==t?t="el":"el"==t?t="y":"ss"==t?t="ß":"ß"==t?t="sam":"sam"==t?t="ss":"#"==t?t="ich":"ich"==t?t="#":"ck"==t?t="$":"$"==t?t="ck":"es"==t?t="%":"%"==t?t="es":"ge"==t?t="&":"&"==t?t="ge":"ver"==t?t="-":"-"==t?t="ver":"ach"==t?t="<":"<"==t?t="ach":"ig"==t?t=">":">"==t?t="ig":"lich"==t?t="_":"_"==t?t="lich":"k"==t?t="keit":"keit"==t?t="k":"m"==t?t="mal":"mal"==t?t="m":"u"==t?t="ung":"ung"==t?t="u":"sch"==t?t="schaft":"schaft"==t?t="sch":"w"==t?t="wärts":"wärts"==t&&(t="w"),zellen[e]=t,writeToTextAusgabe()}}function lastloe(){1!=totalPos&&(totalPos--,selectedCharacter=totalPos-1,zellen.pop(),ausgabe(totalPos),writeToTextAusgabe())}function eingabe(e){var t=brailleback(e);zellen[totalPos]=t,totalPos++,selectedCharacter=totalPos-1,ausgabe(totalPos)}function zifferncode(e){if("00"==e)return"0";for(var t="",c=bit[e.charAt(0)]+bit[e.charAt(1)]+bit[e.charAt(2)],n=0;n<9;n++)"1"==c.charAt(n)&&(t+=(n+1).toString());return t}bit[0]="000",bit[1]="100",bit[2]="010",bit[3]="110",bit[4]="001",bit[5]="101",bit[6]="011",bit[7]="111",bit["000"]="0",bit[100]="1",bit["010"]="2",bit[110]="3",bit["001"]="4",bit[101]="5",bit["011"]="6",bit[111]="7";var tasten=new Array;function tastbewegung(e,t){27==e.keyCode&&"u"==t&&loesch(),8==e.keyCode&&"u"==t&&lastloe(),"<"==e.key&&"u"==t&&aend(selectedCharacter);var c=String.fromCharCode(e.keyCode);if(/[SDFJKL ]/.test(c)){for(var n=0;n<7;n++)c==tasten[n][0]&&("d"==t?tasten[n][1]=tasten[n][2]=1:"u"==t&&(tasten[n][1]=0));if(!(tasten[0][1]||tasten[1][1]||tasten[2][1]||tasten[3][1]||tasten[4][1]||tasten[5][1]||tasten[6][1])){var a=0;tasten[2][2]&&(a+=1),tasten[1][2]&&(a+=2),tasten[0][2]&&(a+=4);var o=0;tasten[3][2]&&(o+=1),tasten[4][2]&&(o+=2),tasten[5][2]&&(o+=4),eingabe(c=a+""+o),scrollTextToEnd(),tasten[0][2]=tasten[1][2]=tasten[2][2]=tasten[3][2]=tasten[4][2]=tasten[5][2]=tasten[6][2]=0}}}function writeToTextAusgabe(){var e=document.getElementById("textausgabe");e.innerHTML="";let t="",c="";for(let a=1;a<totalPos;a++){var n=zellen[a];void 0!==n&&(t=document.createElement("div"),c=document.createTextNode(n)," "==n&&t.classList.add("space"),a==selectedCharacter&&t.classList.add("selected-character"),t.appendChild(c),t.setAttribute("onclick","selectCharacter("+a+")"),e.appendChild(t))}}function selectCharacter(e){ausgabe((selectedCharacter=e)+1)}function scrollTextToEnd(){var e=document.getElementById("textausgabe");e.scrollTop=e.scrollHeight}tasten=[["S",0,0],["D",0,0],["F",0,0],["J",0,0],["K",0,0],["L",0,0],[" ",0,0]];const convertHeight=()=>{const e=window.innerHeight;document.getElementById("body").style.height=`calc(${e}px - 12vmin)`;document.getElementById("popup").style.height=`calc(${e}px - 12vmin)`};function selectLastCharacter(e){const t=document.getElementById("textausgabe");e.target===t&&selectCharacter(totalPos-1)}function copyText(){if(zellen.length<2)return;const e=zellen.join("").slice(1);window.isSecureContext&&(navigator.clipboard.writeText(e),alert("Text ist kopiert.\n\n"+e.substring(0,42)+" …"))}window.addEventListener("resize",convertHeight),window.addEventListener("DOMContentLoaded",convertHeight);